{"version":3,"sources":["../assets/scripts/main.js"],"names":["$","CPWPST","common","init","finalize","home","about_us","UTIL","fire","func","funcname","args","namespace","undefined","loadEvents","each","document","body","className","replace","split","i","classnm","ready","social_field_change_handler","e","input","this","find","attr","val","clone","remove","removeAttr","appendTo","change","div","append","click","a","html","addClass","removeClass","is","triggerHandler","preventDefault","window","location","siblings","BBOSS_GLOBAL_SEARCH","enable_ajax_search","jQuery"],"mappings":"CAYA,SAAAA,GAIA,GAAAC,IAEAC,QACAC,KAAA,aAGAC,SAAA,cAKAC,MACAF,KAAA,aAGAC,SAAA,cAKAE,UACAH,KAAA,eAQAI,GACAC,KAAA,SAAAC,EAAAC,EAAAC,GACA,GAAAH,GACAI,EAAAX,CACAS,GAAAG,SAAAH,EAAA,OAAAA,EACAF,EAAA,KAAAC,EACAD,EAAAA,GAAAI,EAAAH,GACAD,EAAAA,GAAA,kBAAAI,GAAAH,GAAAC,GAEAF,GACAI,EAAAH,GAAAC,GAAAC,IAGAG,WAAA,WAEAP,EAAAC,KAAA,UAGAR,EAAAe,KAAAC,SAAAC,KAAAC,UAAAC,QAAA,KAAA,KAAAC,MAAA,OAAA,SAAAC,EAAAC,GACAf,EAAAC,KAAAc,GACAf,EAAAC,KAAAc,EAAA,cAIAf,EAAAC,KAAA,SAAA,aAKAR,GAAAgB,UAAAO,MAAAhB,EAAAO,YAGAd,EAAAgB,UAAAO,MAAA,YAEA,WACA,GAAAC,GAAA,SAAAC,GACA,GAAAC,GAAA1B,EAAA2B,MAAAC,KAAA,QACA5B,GAAA,iCAAA0B,EAAAG,KAAA,QAAA,KAAAC,IAAAJ,EAAAI,OAEA9B,GAAA,sBAAA4B,KAAA,kEAAAb,KAAA,WACA,GAAAgB,GAAA/B,EAAA2B,MAAAI,OAGAA,GACAH,KAAA,+CACAI,SAGAD,EACAH,KAAA,SACAK,WAAA,MAGAjC,EAAA,mCACA4B,KAAA,IAAAG,EAAAF,KAAA,UACAG,SAGAD,EACAG,SAAA,mCACAC,OAAAX,SAIA,WACAxB,EAAA,gCAAAe,KAAA,WACA,GAAAqB,GAAApC,EAAA2B,KAGAS,GAAAC,OAAA,2CAGAD,EAAAR,KAAA,eAAAU,MAAA,WACA,GAAAC,GAAAvC,EAAA2B,KAcA,OAZA,SAAAY,EAAAC,QACAD,EAAAC,KAAA,QACAJ,EAAAK,SAAA,aACAL,EAAAR,KAAA,qBAAAC,KAAA,WAAA,GACAO,EAAAR,KAAA,iBAAAC,KAAA,WAAA,KAEAU,EAAAC,KAAA,QACAJ,EAAAM,YAAA,aACAN,EAAAR,KAAA,qBAAAC,KAAA,WAAA,GACAO,EAAAR,KAAA,iBAAAC,KAAA,WAAA,KAGA,IAGAO,EAAAR,KAAA,qBAAAe,GAAA,aACAP,EAAAR,KAAA,eAAAgB,eAAA,cAMA,WACA5C,EAAA,8BAAAsC,MAAA,SAAAb,GACAA,EAAAoB,iBACAC,OAAAC,SAAA/C,EAAA,WAAA6B,KAAA,aAKA,WACA7B,EAAA,sGAAAmC,OAAA,WACAnC,EAAA2B,MAAAgB,GAAA,UACA3C,EAAA2B,MAAAqB,SAAA,YAAApB,KAAA,sBAAAa,SAAA,WAEAzC,EAAA2B,MAAAc,SAAA,kBAMAQ,oBAAAC,oBAAA,GAEAC","file":"main.js","sourcesContent":["/* ========================================================================\n * DOM-based Routing\n * Based on http://goo.gl/EUTi53 by Paul Irish\n *\n * Only fires on body classes that match. If a body class contains a dash,\n * replace the dash with an underscore when adding it to the object below.\n *\n * .noConflict()\n * The routing is enclosed within an anonymous function so that you can\n * always reference jQuery with $, even when in .noConflict() mode.\n * ======================================================================== */\n\n( function( $ ) {\n\n\t// Use this variable to set up the common and page specific functions. If you\n\t// rename this variable, you will also need to rename the namespace below.\n\tvar CPWPST = {\n\t\t// All pages\n\t\t'common': {\n\t\t\tinit: function() {\n\t\t\t\t// JavaScript to be fired on all pages\n\t\t\t},\n\t\t\tfinalize: function() {\n\t\t\t\t// JavaScript to be fired on all pages, after page specific JS is fired\n\t\t\t}\n\t\t},\n\t\t// Home page\n\t\t'home': {\n\t\t\tinit: function() {\n\t\t\t\t// JavaScript to be fired on the home page\n\t\t\t},\n\t\t\tfinalize: function() {\n\t\t\t\t// JavaScript to be fired on the home page, after the init JS\n\t\t\t}\n\t\t},\n\t\t// About us page, note the change from about-us to about_us.\n\t\t'about_us': {\n\t\t\tinit: function() {\n\t\t\t\t// JavaScript to be fired on the about us page\n\t\t\t}\n\t\t}\n\t};\n\n\t// The routing fires all common scripts, followed by the page specific scripts.\n\t// Add additional events for more control over timing e.g. a finalize event\n\tvar UTIL = {\n\t\tfire: function( func, funcname, args ) {\n\t\t\tvar fire;\n\t\t\tvar namespace = CPWPST;\n\t\t\tfuncname = ( funcname === undefined ) ? 'init' : funcname;\n\t\t\tfire = func !== '';\n\t\t\tfire = fire && namespace[func];\n\t\t\tfire = fire && typeof namespace[func][funcname] === 'function';\n\n\t\t\tif ( fire ) {\n\t\t\t\tnamespace[func][funcname](args);\n\t\t\t}\n\t\t},\n\t\tloadEvents: function() {\n\t\t\t// Fire common init JS\n\t\t\tUTIL.fire( 'common' );\n\n\t\t\t// Fire page-specific init JS, and then finalize JS\n\t\t\t$.each( document.body.className.replace( /-/g, '_' ).split( /\\s+/ ), function( i, classnm ) {\n\t\t\t\tUTIL.fire( classnm );\n\t\t\t\tUTIL.fire( classnm, 'finalize' );\n\t\t\t});\n\n\t\t\t// Fire common finalize JS\n\t\t\tUTIL.fire( 'common', 'finalize' );\n\t\t}\n\t};\n\n\t// Load Events\n\t$( document ).ready( UTIL.loadEvents );\n\n\t// profile editing\n\t$( document ).ready( function() {\n\t\t// header fields (hidden in main form, duplicated to be accessible by user in the header)\n\t\tvar init_social_fields = ( function() {\n\t\t\tvar social_field_change_handler = function ( e ) {\n\t\t\t\tvar input = $( this ).find( 'input' );\n\t\t\t\t$( '#profile-edit-form input[name=' + input.attr( 'name' ) + ']' ).val( input.val() );\n\t\t\t};\n\t\t\t$( '#profile-edit-form' ).find( '.field-twitter, .field-facebook, .field-linkedin, .field-orcid' ).each( function () {\n\t\t\t\tvar clone = $( this ).clone();\n\n\t\t\t\t// only keep label & input, no permissions radios (or anything else)\n\t\t\t\tclone\n\t\t\t\t\t.find( ':not( label[for^=field], input[id^=field] )' )\n\t\t\t\t\t.remove();\n\n\t\t\t\t// remove id to prevent conflict\n\t\t\t\tclone\n\t\t\t\t\t.find( 'input' )\n\t\t\t\t\t.removeAttr( 'id' );\n\n\t\t\t\t// remove corresponding view-only div\n\t\t\t\t$( '#item-header-content #item-main' )\n\t\t\t\t\t.find( '.' + clone.attr( 'class' ) )\n\t\t\t\t\t.remove();\n\n\t\t\t\t// move to header\n\t\t\t\tclone\n\t\t\t\t\t.appendTo( '#item-header-content #item-main' )\n\t\t\t\t\t.change( social_field_change_handler );\n\t\t\t} );\n\t\t} )();\n\n\t\tvar init_visibility_controls = ( function() {\n\t\t\t$( '#profile-edit-form .editable' ).each( function() {\n\t\t\t\tvar div = $( this );\n\n\t\t\t\t// add visibility controls\n\t\t\t\tdiv.append( '<a href=\"#\" class=\"visibility\">hide</a>' );\n\n\t\t\t\t// bind visibility controls\n\t\t\t\tdiv.find( '.visibility' ).click( function() {\n\t\t\t\t\tvar a = $( this );\n\n\t\t\t\t\tif ( a.html() === 'hide' ) {\n\t\t\t\t\t\ta.html( 'show' );\n\t\t\t\t\t\tdiv.addClass( 'collapsed' );\n\t\t\t\t\t\tdiv.find( '.adminsonly input' ).attr( 'checked', true );\n\t\t\t\t\t\tdiv.find( '.public input' ).attr( 'checked', false );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ta.html( 'hide' );\n\t\t\t\t\t\tdiv.removeClass( 'collapsed' );\n\t\t\t\t\t\tdiv.find( '.adminsonly input' ).attr( 'checked', false );\n\t\t\t\t\t\tdiv.find( '.public input' ).attr( 'checked', true );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\n\t\t\t\tif ( div.find( '.adminsonly input' ).is( ':checked' ) ) {\n\t\t\t\t\tdiv.find( '.visibility' ).triggerHandler( 'click' );\n\t\t\t\t}\n\t\t\t} );\n\t\t} )();\n\n\t\t// cancel button to send user back to view mode\n\t\tvar init_cancel_button = ( function() {\n\t\t\t$( '#profile-edit-form #cancel' ).click( function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\twindow.location = $( '#public' ).attr( 'href' );\n\t\t\t} );\n\t\t} )();\n\n\t\t// highlight changed fields to encourage user to save changes\n\t\tvar init_change_highlighting = ( function() {\n\t\t\t$( '#profile-edit-form select, #profile-edit-form input, #profile-edit-form textarea, #item-main input' ).change( function() {\n\t\t\t\tif ( $( this ).is( 'select' ) ) {\n\t\t\t\t\t$( this ).siblings( '.select2' ).find( '.select2-selection' ).addClass( 'changed' );\n\t\t\t\t} else {\n\t\t\t\t\t$( this ).addClass( 'changed' );\n\t\t\t\t}\n\t\t\t} );\n\t\t} )();\n\t} );\n\n\tBBOSS_GLOBAL_SEARCH.enable_ajax_search = false;\n\n} )( jQuery ); // Fully reference jQuery after this point.\n"],"sourceRoot":"/source/"}